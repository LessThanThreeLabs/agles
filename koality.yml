--- #Koality: 0.0.1
languages:
  python: 2.7
  ruby: 1.9.3
  nodejs: 0.8.9
setup:
  - packages:
    - system:
      - zlib1g
      - gcc
      - g++
      - curl
      - libssl-dev
      - apache2-utils
      - libevent-dev
      - libpq-dev
      - lessc
    - pip:
      - amqp
      - pika: 0.9.5
      - kombu: 2.5.3
      - pycrypto: 2.6
      - librabbitmq
      - sqlalchemy
      - pyyaml
      - msgpack-python
      - nose
      - beautifulsoup4
      - redis
      - greenlet
      - eventlet
      - gitpython
      - psycopg2
      - argparse
      - nose-testconfig
      - boto
      - rackspace-novaclient
      - requests
    - npm:
      - iced-coffee-script
      - less
      - directory: ci/web/back
  - databases:
    - postgres:
      - name: koality
        username: lt3
  - scripts:
    - git config --global user.email "koality@getkoality.com"
    - git config --global user.name "Koality"
    - directory: ci/scripts
      script: ./rabbitmq_setup.sh
compile:
  - compile_platform:
      path: ci/platform
      script: python setup.py install
  - compile_webserver:
      path: ci/web/back
      script: ./compile.sh
  - compile_website:
      path: ci/web/front
      script: ./compile.sh
test:
  - all_tests:
      path: ci/platform
      script:
        - nosetests -sv
        - cd ../web/back
        - npm test
      timeout: 300
