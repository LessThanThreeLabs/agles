---
setup:
  - packages:
    - scripts:
      - script: curl -L https://get.rvm.io | bash -s stable
      - script: rvm install 1.9.1-dev
    - system:
      - vim
      - gcc
      - g++
      - curl
      - libssl-dev
      - apache2-utils
      - redis-server
      - libevent-dev
      - libpq-dev
    - pip:
      - pika
      - kombu
      - librabbitmq
      - sqlalchemy
      - pyyaml
      - msgpack-python
      - nose
      - beautifulsoup4
      - dulwich
      - ipython
      - redis
      - greenlet
      - gevent
      - gitpython
      - virtualenvwrapper
      - psycopg2
      - argparse
    - gem:
      - vagrant
  - scripts:
    - script: ./install_node.sh
      directory: scripts
    - script: ./install_virtualbox.sh
      directory: scripts
  - packages:
    - npm:
      - iced-coffee-script
  - databases:
      postgres:
      - name: agles
        connection-info:
          host: localhost
          port: 5432
          username: postgres
  - scripts:
    # Currently failing, unable to find amqp.js?
    - script: npm install -d
      directory: web/back
build:
  python:
    buildscript:
    path: platform
    testscript: nosetests
