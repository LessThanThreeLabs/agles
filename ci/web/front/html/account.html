<div id="account">
	<centered-panel panel-title="Account">
		<menu options="menuOptions" current-option-name="currentView" option-click="menuOptionClick(optionName)">
			<div id="accountBasic" class="prettyMenuContent" optionName="basic" ng-controller="AccountBasic">
				<styled-form name="basicForm">
					<styled-form-field label="First name" label-padding="true">
						<input type="text" ng-model="account.firstName" name="firstName" placeholder="First" ng-pattern="/^[A-Z][-'a-zA-Z]+$/" ng-maxlength="64" autocomplete="on" required focused>
						<span class="prettyFormError" tooltip="Invalid first name" ng-class="{visible: basicForm.firstName.$dirty && basicForm.firstName.$invalid}">
							<img ng-src="{{'/img/icons/error.png' | fileSuffix}}">
						</span>
					</styled-form-field>
					<styled-form-field label="Last name" label-padding="true">
						<input type="text" ng-model="account.lastName" name="lastName" placeholder="Last" ng-pattern="/^[A-Z][-'a-zA-Z]+$/" ng-maxlength="64" autocomplete="on" required>
						<span class="prettyFormError" tooltip="Invalid last name" ng-class="{visible: basicForm.lastName.$dirty && basicForm.lastName.$invalid}">
							<img ng-src="{{'/img/icons/error.png' | fileSuffix}}">
						</span>
					</styled-form-field>
				</styled-form>

				<div id="accountBasicButtonContainer">
					<button ng-click="submit()" ng-disabled="basicForm.$invalid">Submit</button>
				</div>
			</div>

			<div id="accountPassword" class="prettyMenuContent" optionName="password" ng-controller="AccountPassword">
				<styled-form name="passwordForm">
					<styled-form-field label="Old password" label-padding="true">
						<input type="password" ng-model="account.oldPassword" name="oldPassword" placeholder="old p4ssW0rd" required focused>
					</styled-form-field>
					<styled-form-field label="New password" label-padding="true">
						<input type="password" ng-model="account.newPassword" name="newPassword" placeholder="new p4ssW0rd" ng-pattern="/^(?=.*[a-zA-Z])(?=.*\d).+$/" ng-minlength="8" ng-maxlength="256" required>
						<span class="prettyFormError" tooltip="Password must contain at least 8 characters, a letter, and a number" ng-class="{visible: passwordForm.newPassword.$dirty && passwordForm.newPassword.$invalid}">
							<img ng-src="{{'/img/icons/error.png' | fileSuffix}}">
						</span>
					</styled-form-field>
					<styled-form-field label="Confirm password" label-padding="true">
						<input type="password" ng-model="account.confirmPassword" name="confirmPassword" placeholder="p4ssW0rd, again" ng-pattern="/^(?=.*[a-zA-Z])(?=.*\d).+$/" ng-minlength="8" ng-maxlength="256" required>
						<span class="prettyFormError" tooltip="Passwords do not match" ng-class="{visible: passwordForm.confirmPassword.$dirty && account.newPassword != account.confirmPassword}">
							<img ng-src="{{'/img/icons/error.png' | fileSuffix}}">
						</span>
					</styled-form-field>
				</styled-form>

				<div id="accountPasswordButtonContainer">
					<button ng-click="submit()" ng-disabled="passwordForm.$invalid">Submit</button>
				</div>
			</div>

			<div id="accountSshKeys" class="prettyMenuContent" optionName="sshKeys" ng-controller="AccountSshKeys">
				<table id="sshKeysTable" class="prettyTable">
					<tr class="title">
						<td class="aliasColumn">Alias</td><td class="createdColumn">Created</td><td class="removeColumn">Remove</td>
					</tr>
					<tr ng-repeat="key in keys">
						<td class="aliasColumn">{{key.alias}}</td><td class="createdColumn">{{key.timestamp*1000 | date:'medium'}}</td><td class="removeColumn"><span class="removeLink" ng-click="removeKey(key)">X</span></td>
					</tr>
				</table>

				<div id="noSshKeysWarning">You do not have any SSH keys for this account</div>

				<div ng-controller="AccountAddSshKeys">
					<modal modal-visible="modalVisible">
						<styled-form name="addSshKeyForm">
							<styled-form-field label="Alias" label-padding="true">
								<input type="text" ng-model="addKey.alias" name="alias" placeholder="Alias" ng-maxlength="64" required>
							</styled-form-field>
							<styled-form-field label="Key" label-padding="true">
								<textarea type="text" ng-model="addKey.key" name="key" placeholder="Key" ng-pattern="/^ssh-(?:dss|rsa) [A-Za-z0-9+/]+={0,2}/" ng-maxlength="8192" required></textarea>
								<span class="prettyFormError" tooltip="Invalid key" ng-class="{visible: addSshKeyForm.key.$dirty && addSshKeyForm.key.$invalid}">
									<img ng-src="{{'/img/icons/error.png' | fileSuffix}}">
								</span>
							</styled-form-field>
						</styled-form>

						<div id="accountAddSshKeyButtonContainer">
							<button ng-click="submit()" ng-disabled="addSshKeyForm.$invalid">Add Key</button>
						</div>
					</modal>

					<div id="accountOpenAddSshKeyModalContainer">
						<button ng-click="modalVisible=true">Add a New Key</button>
					</div>
				</div>
			</div>
		</menu>
	</centered-panel>
</div>
