<div id="repository">
	<div id="repositoryHeaderPanel" unselectable>
		<span id="repositoryHeaderTitle">> {{name}}</span>
		<div id="repositoryHeaderLink">
			<img ng-src="{{'/img/icons/link.png' | fileSuffix}}">
			<input ng-model="link" highlight-on-first-click readonly>
		</div>
	</div>

	<div id="repositoryChanges" unselectable ng-controller="RepositoryChanges">
		<menu>
			<menu-header>
				<div id="repositoryChangesSearch" ng-class="{searchOn: searchState == 'search'}">
					<div id="repositoryChangesSearchAll" ng-class="{selected: searchState == 'all'}" ng-click="searchState = 'me'">All</div>
					<div id="repositoryChangesSearchMe" ng-class="{selected: searchState == 'me'}" ng-click="searchState = 'me'">Me</div>
					<div id="repositoryChangesSearchNames" ng-class="{selected: searchState == 'search'}" ng-click="searchState = 'search'">User</div>
				</div>
			</menu-header>
			<menu-options>
				<menu-option class="repositoryChange" ng-repeat="change in changes | orderBy:'number':true" menu-option-text="{{change.number}}" menu-option-subtext="{{change.status}}" menu-option-spinning="{{change.status == 'running'}}" ng-click="changeClick(change)" ng-class="{selected: change.id == currentChangeId, queued: change.status == 'queued', running: change.status == 'running', passed: change.status == 'passed', failed: change.status == 'failed'}"></menu-option>
			</menu-options>
		</menu>
	</div>

	<div id="repositoryChangeDetailsPanel" ng-controller="RepositoryDetails">
		<div id="repositoryChangeDetails">
			<div id="repositoryChangeDetailsStages" unselectable>
				<span class="repositoryChangeStage" ng-click="stageClick(null)" ng-class="{selected: currentStageId == null}">Home</span>
				<span class="repositoryChangeStage" ng-repeat="stage in stages" ng-click="stageClick(stage)" ng-class="{selected: stage.id == currentStageId, queued: stage.status == 'queued', running: stage.status == 'running', passed: stage.status == 'passed', failed: stage.status == 'failed'}">{{stage.name}}</span>
			</div>

			<div id="repositoryChangeDetailsOutput">
				<div id="changeDetailsHome" ng-show="currentChangeId != null && currentStageId == null">
					<styled-form>
						<styled-form-field label="User"><span ng-bind-template="{{metadata.user.firstName}} {{metadata.user.lastName}}"></span></styled-form-field>
						<styled-form-field label="Message"><span ng-bind="metadata.message"></span></styled-form-field>
						<styled-form-field label="Target"><span ng-bind="metadata.target"></span></styled-form-field>
						<styled-form-field label="Commit time"><span ng-bind="metadata.commitTime | date:'medium'"></span></styled-form-field>
					</styled-form>
				</div>

				<div id="changeConsoleText" auto-scroll-to-bottom="lines" ng-show="currentChangeId != null && currentStageId != null">
					<div class="consoleTextLine" ng-repeat="line in lines">
						<span class="consoleTextLineNumber">{{$index + 1}}</span><span class="consoleTextLineText" ng-bind-html="line | ansiparse"></span>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>