<div id="repository">
	<div id="repositoryHeaderPanel" unselectable>
		<span id="repositoryHeaderTitle">{{repository.name}}</span>
		<div id="repositoryHeaderLink">
			<img ng-src="{{'/img/icons/link.png' | fileSuffix}}">
			<input ng-model="repository.uri" highlight-on-first-click readonly>
		</div>
	</div>

	<div id="repositoryChanges" ng-controller="RepositoryChanges" unselectable>
		<menu>
			<menu-header>
				<div id="repositoryChangesSearchContainer">
					<div id="repositoryChangesSearch" ng-class="{searchOn: search.mode == 'search'}">
						<div id="repositoryChangesSearchAll" ng-class="{selected: search.mode == 'all'}" ng-click="searchModeClicked('all')">All</div>
						<div id="repositoryChangesSearchMe" ng-class="{selected: search.mode == 'me'}" ng-click="searchModeClicked('me')">Me</div>
						<div id="repositoryChangesSearchNames" ng-class="{selected: search.mode == 'search'}" ng-click="searchModeClicked('search')" input-focus-on-click>
							<div id="repositorySearchImageAndInputContainer">
								<img ng-src="{{'/img/icons/search.png' | fileSuffix}}"><input type="text" ng-model="search.namesQuery" placeholder="User">
							</div>
						</div>
					</div>
				</div>
			</menu-header>
			<menu-options on-scroll-to-bottom="scrolledToBottom()">
				<menu-option ng-repeat="change in changes | orderBy:'number':true" menu-option-identifier="{{change.number}}" menu-option-text="{{change.status}}" menu-option-spinning="{{change.status == 'running'}}" ng-click="changeClick(change)" ng-class="{selected: change.id == currentChangeId, queued: change.status == 'queued', running: change.status == 'running', passed: change.status == 'passed', failed: change.status == 'failed'}"></menu-option>
			</menu-options>
		</menu>
	</div>

	<div id="repositoryStages" ng-controller="RepositoryStages" unselectable>
		<menu>
			<menu-header>
				<span id="repositoryStagesHeader" ng-show="currentChangeInformation != null">Change {{currentChangeInformation.number}}</span>
			</menu-header>
			<menu-options>
				<menu-option menu-option-text="Summary" ng-show="currentChangeInformation != null" ng-click="stageClick(null)" ng-class="{selected: currentStageId == null}"></menu-option>
				<menu-option ng-repeat="stage in stages" menu-option-text="{{stage.name}}" menu-option-spinning="{{stage.status == 'running'}}" ng-click="stageClick(stage)" ng-class="{selected: stage.id == currentStageId, queued: stage.status == 'queued', running: stage.status == 'running', passed: stage.status == 'passed', failed: stage.status == 'failed'}"></menu-option>
			</menu-options>
		</menu>
	</div>

	<div id="repositoryStageDetails" ng-controller="RepositoryStageDetails" unselectable>
		<div id="repositoryStageDetailsHeader">
			<span ng-show="currentStageId == null">Summary</span>
			<span ng-show="currentStageInformation != null">{{currentStageInformation.name}}</span>
		</div>
		<div id="repositoryStageDetailsContent">
			<div id="repositoryStageDetailsSummary" ng-show="currentChangeId != null && currentStageId == null && currentChangeInformation != null">
				<styled-form>
					<styled-form-field label="Commiter">{{currentChangeInformation.user.firstName}} {{currentChangeInformation.user.lastName}}</styled-form-field>
					<styled-form-field label="Email"><a href="mailto:{{currentChangeInformation.user.email}}?subject=Koality%3A%20{{repository.name}}%20-%20change%20%23{{currentChangeInformation.number}}" target="_blank">{{currentChangeInformation.user.email}}</a></styled-form-field>
					<styled-form-field label="Commit time">{{currentChangeInformation.commitTime | date:'EEEE, MM/dd hh:mm:ss a'}}</styled-form-field>
					<styled-form-field label="Commit target">{{currentChangeInformation.target}}</styled-form-field>
					<styled-form-field label="Commit sha">{{currentChangeInformation.sha}}</styled-form-field>
					<styled-form-field label="Commit message"><span ng-bind-html="currentChangeInformation.message | newLine"></span></styled-form-field>
				</styled-form>
			</div>

			<div id="repositoryStageDetailsOutput" ng-show="currentChangeId != null && currentStageId != null">
				<div class="consoleTextTopBuffer"></div>
				<div class="consoleTextContainer" auto-scroll-to-bottom="lines" auto-scroll-to-bottom-buffer="60">
					<div class="consoleText">
						<div class="consoleTextLine" ng-repeat="line in lines">
							<span class="consoleTextLineNumber">{{$index + 1}}</span><span class="consoleTextLineText" ng-bind-html="line | ansiparse" text-selectable></span>
						</div>
					</div>
				</div>
				<div class="consoleTextBottomBuffer"></div>
			</div>
		</div>
		<div id="repositoryStageDetailsFooter"></div>
	</div>
</div>