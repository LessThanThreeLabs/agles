@import '../constants';

@heartbeatStartColor: rgba(208, 208, 208, 0.4);
@heartbeatFinalColor: rgba(208, 208, 208, 1.0);
@keyframes heartbeat { 
	from { color: @heartbeatStartColor; }
	to { color: @heartbeatFinalColor; }
}
@-moz-keyframes heartbeat { 
	from { color: @heartbeatStartColor; }
	to { color: @heartbeatFinalColor; }
}
@-webkit-keyframes heartbeat { 
	from { color: @heartbeatStartColor; }
	to { color: @heartbeatFinalColor; }
}
@-o-keyframes heartbeat { 
	from { color: @heartbeatStartColor; }
	to { color: @heartbeatFinalColor; }
}

#repository {
	width: 100%;
	height: 100%;

	#repositoryHeaderPanel, #repositoryChangesPanel, #repositoryChangeDetailsPanel {
		// border-radius: 4px;

		// @boxShadowBlur: 2px;
		// @boxShadowSpread: 2px;
		// @boxShadowColor: #101010;
		// box-shadow: 0 2px @boxShadowBlur @boxShadowSpread @boxShadowColor;
		// -moz-box-shadow: 0 2px @boxShadowBlur @boxShadowSpread @boxShadowColor;
		// -webkit-box-shadow: 0 2px @boxShadowBlur @boxShadowSpread @boxShadowColor;
	}

	#repositoryHeaderPanel {
		position: absolute;
		top: 6px;
		left: 8px;
		right: 8px;
		height: 40px;

		#repositoryHeaderTitle {
			display: inline-block;
			margin-top: 7px;
			margin-left: 10px;
			font-size: 1.8em;
		}

		#repositoryHeaderLink {
			float: right;
			margin-top: 7px;
			margin-right: 10px;

			img {
				width: 30px;
				vertical-align: top;
			}

			input {
				width: 300px;
				vertical-align: top;
			}
		}
	}

	#repositoryChanges {
		position: absolute;
		top: 56px;
		left: 8px;
		bottom: 10px;
		width: 225px;		

		border: 1px solid #222222;
	}

	#repositoryChanges {
		@bottomBorderColor: rgba(109, 113, 131, 0.14);

		position: absolute;
		top: 56px;
		left: 8px;
		bottom: 10px;
		width: 225px;

		// needed for firefox
		// https://bugzilla.mozilla.org/show_bug.cgi?id=579776
		#repositoryChangesSearchContainer {
			position: absolute;
			top: 0px;
			left: 0px;
			right: 0px;
			bottom: 0px;
			padding: 8px 8px 0px 8px;

			#repositoryChangesSearch {
				display: -moz-box;
				display: -webkit-box;
				display: box;
				-moz-box-orient: horizontal;
				-webkit-box-orient: horizontal;
				box-orient: horizontal;

				width: 100%;
				height: 100%;

				#repositoryChangesSearchAll, #repositoryChangesSearchMe, #repositoryChangesSearchNames {
					@height: 25px;

					@colorTransitionTime: 0.25s;
					@backgroundColorTransitionTime: 0.25s;
					@minWidthTransitionTime: 0.5s;
					transition: color @colorTransitionTime ease-in-out,
						background-color @backgroundColorTransitionTime ease-in-out,
						min-width @minWidthTransitionTime ease-in-out;
					-moz-transition: color @colorTransitionTime ease-in-out,
						background-color @backgroundColorTransitionTime ease-in-out,
						min-width @minWidthTransitionTime ease-in-out;
					-webkit-transition: color @colorTransitionTime ease-in-out,
						background-color @backgroundColorTransitionTime ease-in-out,
						min-width @minWidthTransitionTime ease-in-out;
					-o-transition: color @colorTransitionTime ease-in-out,
						background-color @backgroundColorTransitionTime ease-in-out,
						min-width @minWidthTransitionTime ease-in-out;

					-moz-box-flex: 1;
					-webkit-box-flex: 1;
					box-flex: 1;

					position: relative;
					height: @height;
					font-size: 14px;
					line-height: @height;
					vertical-align: text-center;
					border-radius: 5px;
					background-color: @backgroundColor;
					vertical-align: top;

					&:hover {
						color: @backgroundColor;
						background-color: @koalityWhite;
					}

					&.selected {
						color: @backgroundColor;
						background-color: @koalityWhite;
					}
				}

				&.searchOn {
					#repositoryChangesSearchNames {
						min-width: 90px;
					}
				}

				#repositoryChangesSearchAll {
					margin-right: 4px;
					text-align: center;
				}

				#repositoryChangesSearchMe {
					margin-right: 4px;
					text-align: center;
				}

				#repositoryChangesSearchNames {
					@imageWidth: 12px;

					text-align: left;

					img {
						padding-left: 5px;
						width: @imageWidth;
					}

					input {
						position: absolute;
						top: 0px;
						left: @imageWidth + 10;
						right: 0px;
						bottom: 0px;
						margin: 0px;
						padding: 0px;
						border: none;
						background-color: rgba(0, 0, 0, 0.0);

						&:focus {
							outline: none;
						}
					}
				}
			}
		}
	}

	#repositoryChangeDetailsPanel {
		position: absolute;
		top: 56px;
		left: 268px;
		right: 8px;
		bottom: 10px;
		margin: 0px;
		padding: 0px;

		// needed for firefox
		// https://bugzilla.mozilla.org/show_bug.cgi?id=579776
		#repositoryChangeDetails {
			display: -moz-box;
			display: -webkit-box;
			display: box;
			-moz-box-orient: vertical;
			-webkit-box-orient: vertical;
			box-orient: vertical;

			width: 100%;
			height: 100%;

			#repositoryChangeDetailsStages {
				padding: 10px 10px 0px 10px;
				min-height: 48px;

				-moz-box-flex: 0;
				-webkit-box-flex: 0;
				box-flex: 0;

				.repositoryChangeStage {
					cursor: hand; cursor: pointer;

					display: inline-block;
					margin: 0px 10px 10px 0px;
					min-width: 100px;
					height: 32px;
					line-height: 32px;
					text-align: center;
					white-space: nowrap;
					font-size: 1.1em;
					font-weight: bold;
					border-radius: 4px;
					border: 3px solid rgb(45, 45, 45);

					@transitionTime: 0.5s;
					transition: all @transitionTime ease-out;
					-moz-transition: all @transitionTime ease-out;
					-webkit-transition: all @transitionTime ease-out;
					-o-transition: all @transitionTime ease-out;

					&:hover {
						background-color: rgba(20, 20, 20, 0.75);
						border-color: rgb(20, 20, 20);
					}

					&.selected {
						background-color: rgba(20, 20, 20, 0.75);
						border-color: rgb(20, 20, 20);
					}

					&.queued {
						color: @heartbeatStartColor;

						@heartbeatSpeed: 3.0s;
						@heartbeatDelay: 0.0s;
						animation: heartbeat @heartbeatSpeed ease-out @heartbeatDelay infinite alternate;
						-moz-animation: heartbeat @heartbeatSpeed ease-out @heartbeatDelay infinite alternate;
						-webkit-animation: heartbeat @heartbeatSpeed ease-out @heartbeatDelay infinite alternate;
						-o-animation: heartbeat @heartbeatSpeed ease-out @heartbeatDelay infinite alternate;
					}

					&.running {
						color: @heartbeatStartColor;

						@heartbeatSpeed: 1.5s;
						@heartbeatDelay: 0.0s;
						animation: heartbeat @heartbeatSpeed ease-out @heartbeatDelay infinite alternate;
						-moz-animation: heartbeat @heartbeatSpeed ease-out @heartbeatDelay infinite alternate;
						-webkit-animation: heartbeat @heartbeatSpeed ease-out @heartbeatDelay infinite alternate;
						-o-animation: heartbeat @heartbeatSpeed ease-out @heartbeatDelay infinite alternate;
					}

					&.passed {
						
					}

					&.failed {
						color: rgba(160, 0, 0, 1.0);
					}
				}
			}

			#repositoryChangeDetailsOutput {
				position: relative;

				-moz-box-flex: 1;
				-webkit-box-flex: 1;
				box-flex: 1;

				#changeDetailsHome {
					position: absolute;
					top: 30px;
					left: 50px;
					font-size: 1.1em;
				}

				#changeConsoleText {
					position: absolute;
					top: 0px;
					left: 0px;
					right: 0px;
					bottom: 0px;
					overflow: auto;

					padding: 0px 10px 20px 5px;

					.consoleTextLine {
						font-family: 'Source Code Pro', sans-serif;
						white-space: nowrap;

						&:hover {
							background-color: rgba(20, 20, 20, 0.75);
							
							.consoleTextLineNumber {
								background-color: rgba(20, 20, 20, 0.75);
							}

							.consoleTextLineText {
								background-color: rgba(20, 20, 20, 0.75);
							}
						}

						.consoleTextLineNumber {
							display: inline-block;
							padding-right: 5px;
							color: #999999;
							width: 40px;
							text-align: right;
						}

						.consoleTextLineText {
							padding-left: 15px;
						}
					}
				}
			}
		}
	}
}